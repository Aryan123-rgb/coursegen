# Course Generator Project Plan

## 1. Project Overview
A web application where users utilize AI to generate detailed courses based on a simple prompt. The system generates text content via LLMs and curates relevant YouTube videos using YouTube/Google APIs.

### Technology Stack
- **Frontend**: Next.js (App Router), TypeScript, Shadcn UI, Tailwind CSS.
- **Backend**: Next.js Server Actions / API Routes.
- **Database**: PostgreSQL with Drizzle ORM.
- **Authentication**: Clerk.
- **AI/Agents**: Vercel AI SDK (`ai`), OpenAI/Google providers.
- **External APIs**: YouTube Data API (for video curation).

## 2. Database Schema (PostgreSQL + Drizzle)
We need a relational schema to store courses, their structure, and content.

### Tables
1.  **Users** (Managed by Clerk, but we might mirror strictly necessary data or just use Clerk ID).
    *   *Note: Usually mapped via `userId` string in other tables.*
2.  **Courses**
    *   `id`: UUID
    *   `userId`: String (Clerk ID)
    *   `title`: String
    *   `description`: String
    *   `imageUrl`: String (optional)
    *   `createdAt`: Timestamp
3.  **Units** (Sections of a course)
    *   `id`: UUID
    *   `courseId`: UUID (FK)
    *   `title`: String
    *   `order`: Integer
4.  **Chapters** (Individual lessons within a unit)
    *   `id`: UUID
    *   `unitId`: UUID (FK)
    *   `title`: String
    *   `content`: Text (Markdown/HTML) - Generated by AI
    *   `videoId`: String (YouTube Video ID) - Found by Agent
    *   `videoTitle`: String
    *   `order`: Integer

## 3. Architecture & Workflow

### Phase 1: Planning & Setup (Current)
- Initialize project.
- Connect Database (Neon/Supabase/Local Postgres).
- Configure Clerk.
- Configure Drizzle.

### Phase 2: Backend & AI Agents
#### API Endpoints / Server Actions
1.  **Create Course** (`POST /api/course/create` or Server Action)
    *   Input: User Prompt.
    *   Process:
        *   Call AI Agent to "Generate Course Skeleton" (Units & Chapters titles).
        *   Save Skeleton to DB.
        *   Return Course ID.
2.  **Generate Chapter Content** (Background Job / Client Trigger)
    *   Input: Chapter ID, Chapter Title.
    *   Process:
        *   **Task A**: Generate educational text (LLM).
        *   **Task B**: Search YouTube for a relevant video (YouTube API).
        *   **Task C**: Update Chapter record in DB.

### Phase 3: Frontend (Shadcn UI)
- **Dashboard**: List user's courses.
- **Create Page**: Input prompt.
- **Course View**: Sidebar with Units/Chapters, Main content area with Video + Text.

## 4. AI "Skills" & Tools (Vercel Agent Skills)
Using `ai` SDK `tool` calling capabilities:
1.  **Skill: YouTube Search**
    *   Function: `searchYoutube(query: string)`
    *   Uses: `googleapis` (YouTube Data API v3).
2.  **Skill: Content Generation**
    *   Standard `generateText` or `generateObject` from `ai`.

## 5. Development Steps (Iterative)
1.  **Infrastructure**: Set up Drizzle + Postgres connection.
2.  **Auth**: Wrap app with Clerk.
3.  **Core Feature**: "Create Course" Logic (Schema generation).
4.  **Core Feature**: "Content Generation" Logic (Video + Text).
5.  **UI Implementation**: Build the visual interface.
6.  **Testing**: Unit tests for Agents, Integration tests for APIs.
